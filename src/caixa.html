<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Caixa | Mundo Doce</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="caixa.css">
</head>
<body class="caixa-body">

    <header class="top-nav">
        <div class="store-info">
            <span class="store-icon">üè™</span>
            <span>Bomboniere Doces e Mimos</span>
        </div>
        <button class="btn-exit">Sair ‚ûî</button>
    </header>

    <main class="content-wrapper">
        <div class="page-header">
            <div class="logo-fixed-box">
                <img src="../assets/Doces e Mimos.png" alt="Logo Mundo Doce">
            </div>
            <h1 class="main-title">Controle de Caixa</h1>
            <p class="main-subtitle">Contagem de C√©dulas e Moedas</p>
        </div>

        <div class="stepper-card">
            <div class="card-header-row">
                <span class="step-indicator">üìã Etapa 1 de 12</span>
                <span class="status-badge">üéâ Falta pouco!</span>
            </div>

            <div class="progress-container">
                <div class="progress-bar" style="width: 0%;"></div>
                <div class="progress-knob" style="left: 0%;"></div>
            </div>
            <p class="progress-hint">Ao terminar, ganharemos um docinho virtual! üç≠</p>

            <div class="money-focus-area">
                <div class="money-photo">
                    <img id="img-nota" src="../assets/nota200.jpg" alt="Nota">
                </div>
                <h2 class="money-value" id="valor-nota-display">R$ 200,00</h2>
            </div>

            <p class="instruction">
                <span id="pergunta-nota">Quantas notas de <strong id="texto-nota-pergunta">R$ 200</strong> voc√™ tem?</span>
                <span id="pergunta-moeda" style="display: none;">Quantas moedas de <strong id="texto-moeda-pergunta">R$ 1,00</strong> voc√™ tem?</span>
</p>

            <div class="counter-control">
                <button class="count-btn" onclick="alterarValor(-1)">‚àí</button>
                <input type="text" id="contador" value="0" readonly class="count-display">
                <button class="count-btn" onclick="alterarValor(1)">+</button>
            </div>

            <button class="primary-action-btn" onclick="proximaEtapa()">Confirmar e Pr√≥ximo ‚ûî</button>
            
            <div class="secondary-actions">
                <button class="btn-link-back" onclick="voltarEtapa()">
                    <span class="seta-voltar">‚Üê</span> Voltar
                </button>
                <button class="btn-link-skip" onclick="proximaEtapa()">PULAR ESTA NOTA</button>
            </div>
        </div>

        <div class="floating-summary">
            <div class="sum-item">
                <div class="sum-icon yellow">üí≥</div>
                <div class="sum-details">
                    <label>TOTAL PARCIAL</label>
                    <strong id="total-parcial">R$ 0,00</strong>
                </div>
            </div>
            <div class="sum-item">
                <div class="sum-icon pink">üìã</div>
                <div class="sum-details">
                    <label>SALDO ESPERADO</label>
                    <strong>R$ 1.248,50</strong>
                </div>
            </div>
            <div class="sum-item">
                <div class="sum-icon green">‚öñÔ∏è</div>
                <div class="sum-details">
                    <label>DIFEREN√áA</label>
                    <strong class="diff-positive">+ R$ 0,00</strong>
                </div>
            </div>
        </div>
    </main>

    <script>
        // LISTA DE NOTAS
        const itensCaixa = [
            { valor: "200,00", texto: "R$ 200", img: "../assets/nota200.jpg", tipo: "nota" },
            { valor: "100,00", texto: "R$ 100", img: "../assets/nota100.jpeg", tipo: "nota" },
            { valor: "50,00",  texto: "R$ 50",  img: "../assets/nota50.jpeg", tipo: "nota" },
            { valor: "20,00",  texto: "R$ 20",  img: "../assets/nota20.jpeg", tipo: "nota" },
            { valor: "10,00",  texto: "R$ 10",  img: "../assets/nota10.jpeg", tipo: "nota" },
            { valor: "5,00",   texto: "R$ 5",   img: "../assets/nota5.jpeg", tipo: "nota" },
            { valor: "2,00",   texto: "R$ 2",   img: "../assets/nota2.jpeg", tipo: "nota" },
            { valor: "1,00",   texto: "R$ 1",   img: "../assets/moeda1.png", tipo: "moeda" },
            { valor: "0,50",   texto: "R$ 0,50",   img: "../assets/moeda50.png", tipo: "moeda" },
            { valor: "0,25",   texto: "R$ 0,25",   img: "../assets/moeda25.png", tipo: "moeda" },
            { valor: "0,10",   texto: "R$ 0,10",   img: "../assets/moeda10.png", tipo: "moeda" },
            { valor: "0,05",   texto: "R$ 0,05",   img: "../assets/moeda5.png", tipo: "moeda" }
        ];

        let etapaAtual = 0;

        // FUN√á√ÉO PARA AUMENTAR/DIMINUIR O CONTADOR
        function alterarValor(delta) {
            const input = document.getElementById('contador');
            if (input) {
                let valor = parseInt(input.value) || 0;
                valor = Math.max(0, valor + delta);
                input.value = valor;
            }
        }

        // FUN√á√ÉO PARA ATUALIZAR A TELA (FOTO E TEXTO)
        function atualizarTela() {
    const item = itensCaixa[etapaAtual];

    // Atualiza imagem e valor
    document.getElementById('img-nota').src = item.img;
    document.getElementById('valor-nota-display').innerText = `R$ ${item.valor}`;
    document.getElementById('contador').value = 0;

    const areaNota = document.getElementById('pergunta-nota');
    const areaMoeda = document.getElementById('pergunta-moeda');

    // üî• AQUI est√° a l√≥gica que faltava
    if (item.tipo === "moeda") {
        areaNota.style.display = "none";
        areaMoeda.style.display = "inline";
        document.getElementById('texto-moeda-pergunta').innerText = item.texto;
    } else {
        areaNota.style.display = "inline";
        areaMoeda.style.display = "none";
        document.getElementById('texto-nota-pergunta').innerText = item.texto;
    }

    // Progresso
    const porcentagem = ((etapaAtual + 1) / itensCaixa.length) * 100;
    document.querySelector('.step-indicator').innerText =
        `üìã Etapa ${etapaAtual + 1} de ${itensCaixa.length}`;
    document.querySelector('.progress-bar').style.width = porcentagem + "%";
    document.querySelector('.progress-knob').style.left = porcentagem + "%";
}

        // FUN√á√ÉO PARA O BOT√ÉO PR√ìXIMO
        // Crie um objeto para guardar as quantidades
let memoriaContagem = {};

function proximaEtapa() {
    const inputContador = document.getElementById('contador');
    const qtd = parseInt(inputContador.value) || 0;
    const itemAtual = itensCaixa[etapaAtual];
    
    // 1. Salva na mem√≥ria tempor√°ria
    // Criamos um objeto se ele n√£o existir
    let memoria = JSON.parse(localStorage.getItem('dadosContagem')) || {};
    memoria[itemAtual.valor] = qtd;
    localStorage.setItem('dadosContagem', JSON.stringify(memoria));

    // 2. Verifica se vai para a pr√≥xima nota ou para a revis√£o
    if (etapaAtual < itensCaixa.length - 1) {
        etapaAtual++;
        atualizarTela();
    } else {
        // MUITO IMPORTANTE: O nome do arquivo aqui deve ser igual ao que voc√™ salvou
        window.location.href = 'revisao.html'; 
    }
}

        // FUN√á√ÉO PARA O BOT√ÉO VOLTAR
        function voltarEtapa() {
            if (etapaAtual > 0) {
                etapaAtual--;
                atualizarTela();
            }
        }

        // INICIALIZA√á√ÉO ASSIM QUE A P√ÅGINA CARREGA
        window.onload = function() {
            atualizarTela();

        };
    </script>
</body>
</html>
</body>
</html>